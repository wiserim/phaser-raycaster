!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("PhaserRaycaster",[],e):"object"==typeof exports?exports.PhaserRaycaster=e():t.PhaserRaycaster=e()}(self,(function(){return function(){var t={880:function(t,e,i){var n=function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once("boot",this.boot,this)};n.register=function(t){t.register("PhaserRaycaster",n,"base")},(n.prototype={boot:function(){var t=this.systems.events;t.on("start",this.start,this),t.on("preupdate",this.preUpdate,this),t.on("update",this.update,this),t.on("postupdate",this.postUpdate,this),t.on("pause",this.pause,this),t.on("resume",this.resume,this),t.on("sleep",this.sleep,this),t.on("wake",this.wake,this),t.on("shutdown",this.shutdown,this),t.on("destroy",this.destroy,this)},test:function(t){console.log("RaycasterPlugin says hello "+t+"!")},start:function(){},preUpdate:function(t,e){},update:function(t,e){},postUpdate:function(t,e){},pause:function(){},resume:function(){},sleep:function(){},wake:function(){},shutdown:function(){},destroy:function(){this.shutdown(),this.scene=void 0},createRaycaster:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.scene=this.scene,new this._Raycaster(t)}}).constructor=n,n.prototype._Raycaster=i(741).i,t.exports=n},933:function(t,e,i){"use strict";function n(){return this.object.getBounds()}i.r(e),i.d(e,{getBoundingBox:function(){return n}})},163:function(t,e,i){"use strict";i.d(e,{v:function(){return y}});var n=i(812),r=i(840),s=i(121),o=i(530),a=i(99),h=i(724),c=i(739),l=i(98),u=i(933);function y(t){switch(this.object=t.object,void 0===t.type&&(t.type=t.object.type),"body"!==t.type&&"composite"!==t.type||(t.type="MatterBody"),this.type=t.type,t.type){case"Polygon":this.getPoints=s.getPoints,this.getSegments=s.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=s.updateMap;break;case"Arc":this.segmentCount=t.segmentCount?t.segmentCount:0,this.circle=!t.segmentCount,this.getPoints=o.getPoints,this.getSegments=o.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=o.updateMap,this.setSegmentCount=l.setSegmentCount;break;case"Line":this.getPoints=r.getPoints,this.getSegments=r.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=r.updateMap;break;case"Container":this.mapChild=t.mapChild?t.mapChild:null,this.segmentCount=t.segmentCount?t.segmentCount:0,this._circles=[],this.getPoints=a.getPoints,this.getSegments=a.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=a.updateMap,this._updateChildMap=a._updateChildMap,this.setSegmentCount=l.setSegmentCount;break;case"StaticTilemapLayer":case"DynamicTilemapLayer":case"TilemapLayer":this.collisionTiles=t.collisionTiles?t.collisionTiles:[],this.getPoints=h.getPoints,this.getSegments=h.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=h.updateMap,this.setCollisionTiles=h.setCollisionTiles,this.object.setOrigin(0,0);break;case"MatterBody":this.forceConvex=!!t.forceConvex,this.forceVerticesMapping=!!t.forceVerticesMapping,this.circle=!1,this.getPoints=c.getPoints,this.getSegments=c.getSegments,this.getBoundingBox=c.getBoundingBox,this.updateMap=c.updateMap;break;default:this.getPoints=n.getPoints,this.getSegments=n.getSegments,this.getBoundingBox=u.getBoundingBox,this.updateMap=n.updateMap}return"MatterBody"!=this.type&&"function"!=typeof this.object.getBounds&&(this.notSupported=!0),this.dynamic=1==t.dynamic,this.active=void 0===t.active||t.active,this}},6:function(t,e,i){"use strict";function n(){for(var t in"body"===this.object.type||"composite"===this.object.type?delete object.raycasterMap:this.object.data&&this.object.data.remove("raycasterMap"),this)delete this[t]}i.d(e,{o:function(){return n}})},530:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.active)return[];if(this._points.length>0)return this._points;var e=[],i=new Phaser.Geom.Point;if(i.x=this.object.x-this.object.displayWidth*(this.object.originX-.5),i.y=this.object.y-this.object.displayHeight*(this.object.originY-.5),t){var n,r=new Phaser.Geom.Line,s=new Phaser.Geom.Line,o=this.object.rotation;if(0!==o){var a=new Phaser.Geom.Line(this.object.x,this.object.y,i.x,i.y);Phaser.Geom.Line.SetToAngle(a,this.object.x,this.object.y,Phaser.Geom.Line.Angle(a)+o,Phaser.Geom.Line.Length(a));var h=a.getPointB();n=new Phaser.Geom.Line(t.origin.x,t.origin.y,h.x,h.y)}else n=new Phaser.Geom.Line(t.origin.x,t.origin.y,i.x,i.y);var c=Math.sqrt(Math.pow(Phaser.Geom.Line.Length(n),2)-Math.pow(this.object.radius*this.object.scaleX,2)),l=Phaser.Geom.Line.Angle(n),u=Math.asin(this.object.radius*this.object.scaleX/Phaser.Geom.Line.Length(n));Phaser.Geom.Line.SetToAngle(r,t.origin.x,t.origin.y,l-u,c),Phaser.Geom.Line.SetToAngle(s,t.origin.x,t.origin.y,l+u,c),e.push(r.getPointB()),e.push(s.getPointB())}return e}function o(){return this.active?this._segments:[]}function a(){if(!this.active)return this;if(!this.segmentCount)return this._points=[],this._segments=[],this;var t=new Phaser.Geom.Point;t.x=this.object.x-this.object.displayWidth*this.object.originX+this.object.radius*this.object.scaleX,t.y=this.object.y-this.object.displayHeight*this.object.originY+this.object.radius*this.object.scaleY;var e=this.object.geom.getPoints(this.segmentCount),i=[],r=this.object.rotation;if(0!==r){var s,o=[],a=n(e);try{for(a.s();!(s=a.n()).done;){var h=s.value,c=new Phaser.Geom.Line(this.object.x,this.object.y,this.object.x+(h.x+this.object.radius)*this.object.scaleX,this.object.y+(h.y+this.object.radius)*this.object.scaleY);Phaser.Geom.Line.SetToAngle(c,this.object.x,this.object.y,Phaser.Geom.Line.Angle(c)+r,Phaser.Geom.Line.Length(c)),o.push(c.getPointB())}}catch(t){a.e(t)}finally{a.f()}e=o}else{var l,u=n(e);try{for(u.s();!(l=u.n()).done;){var y=l.value;y.x=y.x*this.object.scaleX+t.x,y.y=y.y*this.object.scaleY+t.y}}catch(t){u.e(t)}finally{u.f()}}for(var g=0,d=e.length;g<d;g++)g+1<d?i.push(new Phaser.Geom.Line(e[g].x,e[g].y,e[g+1].x,e[g+1].y)):i.push(new Phaser.Geom.Line(e[g].x,e[g].y,e[0].x,e[0].y));return this._points=e,this._segments=i,this}i.r(e),i.d(e,{getPoints:function(){return s},getSegments:function(){return o},updateMap:function(){return a}})},99:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.active)return[];var i=this._points,r=new Phaser.Geom.Point;if(r.x=this.object.x-this.object.displayWidth*this.object.originX,r.y=this.object.y-this.object.displayHeight*this.object.originY,0==this.segmentCount&&!e&&t){var s=new Phaser.Geom.Line(0,0,t.origin.x-r.x,t.origin.y-r.y);Phaser.Geom.Line.SetToAngle(s,0,0,Phaser.Geom.Line.Angle(s)-this.object.rotation,Phaser.Geom.Line.Length(s));t._raycaster.createRay({origin:{x:s.getPointB().x,y:s.getPointB().y}});var o,a,h=new Phaser.Geom.Line,c=new Phaser.Geom.Line,l=n(this._circles);try{for(l.s();!(a=l.n()).done;){var u=a.value;u.points=[],o=new Phaser.Geom.Line(t.origin.x,t.origin.y,u.x,u.y);var y=Math.sqrt(Math.pow(Phaser.Geom.Line.Length(o),2)-Math.pow(u.radius,2)),g=Phaser.Geom.Line.Angle(o),d=Math.asin(u.radius/Phaser.Geom.Line.Length(o));Phaser.Geom.Line.SetToAngle(h,t.origin.x,t.origin.y,g-d,y),Phaser.Geom.Line.SetToAngle(c,t.origin.x,t.origin.y,g+d,y),u.points.push(h.getPointB()),u.points.push(c.getPointB()),i.push(h.getPointB()),i.push(c.getPointB())}}catch(t){l.e(t)}finally{l.f()}}return i}function o(){return this.active?this._segments:[]}function a(){if(!this.active)return this;var t=[],e=[],i=this.object;this._circles=[];var r=new Phaser.Geom.Point;r.x=this.object.x-this.object.displayWidth*this.object.originX,r.y=this.object.y-this.object.displayHeight*this.object.originY;var s=i.rotation;if(this.mapChild)this._updateChildMap(this.mapChild,t,e,s,r);else{i.iterate(function(i){this._updateChildMap(i,t,e,s,r)}.bind(this));for(var o=0,a=i.list.length;o<a;o++){var h=i.list[o],c=h.data.get("raycasterMap");if(c)for(var l=o+1,u=i.list.length;l<u;l++){var y=i.list[l],g=y.data.get("raycasterMap");if(g&&Phaser.Geom.Intersects.RectangleToRectangle(h.getBounds(),y.getBounds())){var d,f=n(c.getSegments());try{for(f.s();!(d=f.n()).done;){var p,b=d.value,m=n(g.getSegments());try{for(m.s();!(p=m.n()).done;){var v=p.value,P=[];if(Phaser.Geom.Intersects.LineToLine(b,v,P))if(0!==s){var x=new Phaser.Geom.Line(i.x,i.y,P.x*i.scaleX+r.x,P.y*i.scaleY+r.y);Phaser.Geom.Line.SetToAngle(x,this.object.x,this.object.y,Phaser.Geom.Line.Angle(x)+s,Phaser.Geom.Line.Length(x)),t.push(x.getPointB())}else t.push(new Phaser.Geom.Point(P.x*i.scaleX+r.x,P.y*i.scaleX+r.y))}}catch(t){m.e(t)}finally{m.f()}}}catch(t){f.e(t)}finally{f.f()}}}}}return this._points=t,this._segments=e,this}function h(t,e,i,r,s){if(t.data||t.setDataEnabled(),!t.data.get("raycasterMapNotSupported")){var o=t.data.get("raycasterMap");if(o)o.updateMap();else{if((o=new this.constructor({object:t,segmentCount:this.segmentCount})).notSupported)return o.destroy(),void t.data.set("raycasterMapNotSupported",!0);t.data.set("raycasterMap",o)}var a,h=[],c=n(o.getPoints(!1,!0));try{for(c.s();!(a=c.n()).done;){var l=a.value;if(0!==r){var u=new Phaser.Geom.Line(this.object.x,this.object.y,l.x*this.object.scaleX+s.x,l.y*this.object.scaleY+s.y);Phaser.Geom.Line.SetToAngle(u,this.object.x,this.object.y,Phaser.Geom.Line.Angle(u)+r,Phaser.Geom.Line.Length(u)),e.push(u.getPointB())}else e.push(new Phaser.Geom.Point(l.x*this.object.scaleX+s.x,l.y*this.object.scaleX+s.y));h.push(e[e.length-1])}}catch(t){c.e(t)}finally{c.f()}var y,g=n(o.getSegments());try{for(g.s();!(y=g.n()).done;){var d=y.value;if(0!==r){var f=d.getPointA(),p=d.getPointB(),b=new Phaser.Geom.Line(this.object.x,this.object.y,f.x*this.object.scaleX+s.x,f.y*this.object.scaleY+s.y),m=new Phaser.Geom.Line(this.object.x,this.object.y,p.x*this.object.scaleX+s.x,p.y*this.object.scaleY+s.y);Phaser.Geom.Line.SetToAngle(b,this.object.x,this.object.y,Phaser.Geom.Line.Angle(b)+r,Phaser.Geom.Line.Length(b)),Phaser.Geom.Line.SetToAngle(m,this.object.x,this.object.y,Phaser.Geom.Line.Angle(m)+r,Phaser.Geom.Line.Length(m)),i.push(new Phaser.Geom.Line(b.getPointB().x,b.getPointB().y,m.getPointB().x,m.getPointB().y))}else i.push(new Phaser.Geom.Line(d.getPointA().x*this.object.scaleX+s.x,d.getPointA().y*this.object.scaleY+s.y,d.getPointB().x*this.object.scaleX+s.x,d.getPointB().y*this.object.scaleY+s.y))}}catch(t){g.e(t)}finally{g.f()}if("Arc"==o.type&&0==this.segmentCount){var v=new Phaser.Geom.Point;if(v.x=(o.object.x-o.object.displayWidth*(o.object.originX-.5))*this.object.scaleX+s.x,v.y=(o.object.y-o.object.displayHeight*(o.object.originY-.5))*this.object.scaleY+s.y,0!==r){var P=new Phaser.Geom.Line(this.object.x,this.object.y,v.x,v.y);Phaser.Geom.Line.SetToAngle(P,this.object.x,this.object.y,Phaser.Geom.Line.Angle(P)+r,Phaser.Geom.Line.Length(P)),v=P.getPointB()}this._circles.push(new Phaser.Geom.Circle(v.x,v.y,o.object.radius*o.object.scaleX*this.object.scaleX))}else if("Container"===o.type){var x,j=n(o._circles);try{for(j.s();!(x=j.n()).done;){var w=x.value,G=new Phaser.Geom.Point;if(G.x=w.x*this.object.scaleX+s.x,G.y=w.y*this.object.scaleY+s.y,0!==r){var M=new Phaser.Geom.Line(this.object.x,this.object.y,G.x,G.y);Phaser.Geom.Line.SetToAngle(M,this.object.x,this.object.y,Phaser.Geom.Line.Angle(M)+r,Phaser.Geom.Line.Length(M)),G=M.getPointB()}this._circles.push(new Phaser.Geom.Circle(G.x,G.y,w.radius*this.object.scaleX))}}catch(t){j.e(t)}finally{j.f()}}}}i.r(e),i.d(e,{_updateChildMap:function(){return h},getPoints:function(){return s},getSegments:function(){return o},updateMap:function(){return a}})},667:function(t,e,i){"use strict";function n(t,e){return this._raycaster=e||!1,this.type,this.active,this.dynamic,this.circle=!1,this.object,this._points=[],this._segments=[],this.getPoints,this.getSegments,this.getBoundingBox,this.updateMap,this.config(t),this.notSupported||this.updateMap(),this}i.d(e,{D:function(){return n}}),n.prototype={config:i(163).v,destroy:i(6).o},n.prototype.constructor=n},840:function(t,e,i){"use strict";function n(){return this.active?this._points:[]}function r(){return this.active?this._segments:[]}function s(){if(!this.active)return this;var t=[],e=[],i=new Phaser.Geom.Point;i.x=this.object.x-this.object.displayWidth*this.object.originX,i.y=this.object.y-this.object.displayHeight*this.object.originY;var n=this.object.geom.getPointA(),r=this.object.geom.getPointB(),s=this.object.rotation;if(0!==s){var o=new Phaser.Geom.Line(this.object.x,this.object.y,n.x*this.object.scaleX+i.x,n.y*this.object.scaleY+i.y);Phaser.Geom.Line.SetToAngle(o,this.object.x,this.object.y,Phaser.Geom.Line.Angle(o)+s,Phaser.Geom.Line.Length(o)),n=o.getPointB();var a=new Phaser.Geom.Line(this.object.x,this.object.y,r.x*this.object.scaleX+i.x,r.y*this.object.scaleY+i.y);Phaser.Geom.Line.SetToAngle(a,this.object.x,this.object.y,Phaser.Geom.Line.Angle(a)+s,Phaser.Geom.Line.Length(a)),r=a.getPointB(),t.push(new Phaser.Geom.Point(n.x,n.y)),t.push(new Phaser.Geom.Point(r.x,r.y)),e.push(new Phaser.Geom.Line(n.x,n.y,r.x,r.y))}else t.push(new Phaser.Geom.Point(n.x*this.object.scaleX+i.x,n.y*this.object.scaleY+i.y)),t.push(new Phaser.Geom.Point(r.x*this.object.scaleX+i.x,r.y*this.object.scaleY+i.y)),e.push(new Phaser.Geom.Line(n.x*this.object.scaleX+i.x,n.y*this.object.scaleY+i.y,r.x+i.x*this.object.scaleX,r.y*this.object.scaleY+i.y));return this._points=t,this._segments=e,this}i.r(e),i.d(e,{getPoints:function(){return n},getSegments:function(){return r},updateMap:function(){return s}})},739:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.active)return[];var e="body"===this.object.type||"composite"===this.object.type?this.object:this.object.body;if(t&&!this.forceVerticesMapping&&e.circleRadius>0){var i=[],n=new Phaser.Geom.Line,r=new Phaser.Geom.Line,s=new Phaser.Geom.Line(t.origin.x,t.origin.y,e.position.x,e.position.y),o=Math.sqrt(Math.pow(Phaser.Geom.Line.Length(s),2)-Math.pow(e.circleRadius*e.scale.x,2)),a=Phaser.Geom.Line.Angle(s),h=Math.asin(e.circleRadius*e.scale.x/Phaser.Geom.Line.Length(s));return Phaser.Geom.Line.SetToAngle(n,t.origin.x,t.origin.y,a-h,o),Phaser.Geom.Line.SetToAngle(r,t.origin.x,t.origin.y,a+h,o),i.push(n.getPointB()),i.push(r.getPointB()),i}return this._points}function o(){return this.active?this._segments:[]}function a(){if(!this.active)return this;var t=[],e=[],i="body"===this.object.type||"composite"===this.object.type?this.object:this.object.body,r=[i],s=!1;if(i.circleRadius>0&&!this.forceVerticesMapping)return this.circle=!0,this._points=t,this._segments=e,this;this.circle=!1,"composite"==i.type&&(r=i.bodies),(void 0===i.bounds&&"composite"==i.type||"composite"==i.type&&this.dynamic)&&(s=!0);var o,a=n(r);try{for(a.s();!(o=a.n()).done;){var h=o.value;if(1===h.parts.length||this.forceConvex){var c=h.parts[0].vertices;t.push(new Phaser.Geom.Point(c[0].x,c[0].y));for(var l=1,u=c.length;l<u;l++){var y=new Phaser.Geom.Point(c[l-1].x,c[l-1].y),g=new Phaser.Geom.Point(c[l].x,c[l].y);t.push(g);var d=new Phaser.Geom.Line(y.x,y.y,g.x,g.y);e.push(d)}var f=new Phaser.Geom.Line(c[c.length-1].x,c[c.length-1].y,c[0].x,c[0].y);e.push(f)}else if(h.parts.length>1)for(var p=function(i,n){var r=h.parts[i].vertices,s=new Phaser.Geom.Point(r[0].x,r[0].y);void 0===t.find((function(t){return t.x==s.x&&t.y==s.y}))&&t.push(s);for(var o=function(i,n){var o=new Phaser.Geom.Point(r[i].x,r[i].y),a=e.findIndex((function(t){return t.x1==s.x&&t.y1==s.y&&t.x2==o.x&&t.y2==o.y||t.x1==o.x&&t.y1==o.y&&t.x2==s.x&&t.y2==s.y}));if(-1!==a)return e.splice(a,1),s=o,"continue";void 0===t.find((function(t){return t.x==o.x&&t.y==o.y}))&&t.push(o);var h=new Phaser.Geom.Line(s.x,s.y,o.x,o.y);e.push(h),s=o},a=1,c=r.length;a<c;a++)o(a);var l=new Phaser.Geom.Line(r[r.length-1].x,r[r.length-1].y,r[0].x,r[0].y),u=e.findIndex((function(t){return t.x1==l.x1&&t.y1==l.y1&&t.x2==l.x2&&t.y2==l.y2||t.x1==l.x2&&t.y1==l.y2&&t.x2==l.x1&&t.y2==l.y1}));void 0===u&&e.push(l)},b=1,m=h.parts.length;b<m;b++)p(b)}}catch(t){a.e(t)}finally{a.f()}if(this._points=t,this._segments=e,s){var v=this._raycaster.scene.matter.composite.bounds(i);i.bounds=v}return this}function h(){var t="body"===this.object.type||"composite"===this.object.type?this.object.bounds:this.object.body.bounds;return new Phaser.Geom.Rectangle(t.min.x,t.min.y,t.max.x-t.min.x,t.max.y-t.min.y)}i.r(e),i.d(e,{getBoundingBox:function(){return h},getPoints:function(){return s},getSegments:function(){return o},updateMap:function(){return a}})},121:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(){return this.active?this._points:[]}function o(){return this.active?this._segments:[]}function a(){if(!this.active)return this;var t=[],e=[],i=new Phaser.Geom.Point;i.x=this.object.x-this.object.displayWidth*this.object.originX,i.y=this.object.y-this.object.displayHeight*this.object.originY;var r=this.object.rotation;if(0!==r){var s,o=n(this.object.geom.points);try{for(o.s();!(s=o.n()).done;){var a=s.value,h=new Phaser.Geom.Line(this.object.x,this.object.y,a.x*this.object.scaleX+i.x,a.y*this.object.scaleY+i.y);Phaser.Geom.Line.SetToAngle(h,this.object.x,this.object.y,Phaser.Geom.Line.Angle(h)+r,Phaser.Geom.Line.Length(h)),t.push(h.getPointB())}}catch(t){o.e(t)}finally{o.f()}}else{var c,l=n(this.object.geom.points);try{for(l.s();!(c=l.n()).done;){var u=c.value;t.push(new Phaser.Geom.Point(u.x*this.object.scaleX+i.x,u.y*this.object.scaleY+i.y))}}catch(t){l.e(t)}finally{l.f()}}for(var y=0,g=t.length;y<g;y++)y+1<g&&e.push(new Phaser.Geom.Line(t[y].x,t[y].y,t[y+1].x,t[y+1].y));if(this.object.closePath){var d=t.length-1;e.push(new Phaser.Geom.Line(t[d].x,t[d].y,t[0].x,t[0].y))}return this._points=t,this._segments=e,this}i.r(e),i.d(e,{getPoints:function(){return s},getSegments:function(){return o},updateMap:function(){return a}})},812:function(t,e,i){"use strict";function n(){return this.active?this._points:[]}function r(){return this.active?this._segments:[]}function s(){if(!this.active)return this;for(var t,e=[],i=0,n=(t=[this.object.getTopLeft(),this.object.getTopRight(),this.object.getBottomRight(),this.object.getBottomLeft()]).length;i<n;i++)i+1<n?e.push(new Phaser.Geom.Line(t[i].x,t[i].y,t[i+1].x,t[i+1].y)):e.push(new Phaser.Geom.Line(t[i].x,t[i].y,t[0].x,t[0].y));return this._points=t,this._segments=e,this}i.r(e),i.d(e,{getPoints:function(){return n},getSegments:function(){return r},updateMap:function(){return s}})},724:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.active)return[];if(!t||t&&(0==t.detectionRange||t.detectionRange>=Phaser.Math.MAX_SAFE_INTEGER))return this._points;var e,i=[],r=n(this._points);try{for(r.s();!(e=r.n()).done;){var s=e.value;Phaser.Math.Distance.Between(t.origin.x,t.origin.y,s.x,s.y)<=t.detectionRange&&i.push(s)}}catch(t){r.e(t)}finally{r.f()}var o,a=this.getSegments(t),h=n(a);try{for(h.s();!(o=h.n()).done;){var c=o.value;Phaser.Math.Distance.Between(t.origin.x,t.origin.y,c.x1,c.y1)>t.detectionRange&&i.push(new Phaser.Geom.Point(c.x1,c.y1)),Phaser.Math.Distance.Between(t.origin.x,t.origin.y,c.x2,c.y2)>t.detectionRange&&i.push(new Phaser.Geom.Point(c.x2,c.y2))}}catch(t){h.e(t)}finally{h.f()}return i}function o(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.active)return[];if(!t||t&&(0==t.detectionRange||t.detectionRange>=Phaser.Math.MAX_SAFE_INTEGER))return this._segments;var e,i=[],r=n(this._segments);try{for(r.s();!(e=r.n()).done;){var s=e.value;Phaser.Geom.Intersects.LineToCircle(s,t.detectionRangeCircle)&&i.push(s)}}catch(t){r.e(t)}finally{r.f()}return i}function a(){var t=this;if(!this.active)return this;var e=[],i=[],r=new Phaser.Geom.Point;r.x=this.object.x,r.y=this.object.y;for(var s=!1,o=[],a=[],h=0,c=this.object.layer.data.length;h<c;h++){for(var l=this.object.layer.data[h],u=0,g=l.length;u<g;u++){var d=l[u],f=!!(h>0&&this.collisionTiles.includes(this.object.layer.data[h-1][u].index)!=this.collisionTiles.includes(d.index)||0==h&&this.collisionTiles.includes(d.index)),p=!!(u>0&&this.collisionTiles.includes(this.object.layer.data[h][u-1].index)!=this.collisionTiles.includes(d.index)||0==u&&this.collisionTiles.includes(d.index)),b=!1;if(a.length<=u?a[u]=[]:a[u].length>0&&(b=a[u][a[u].length-1]),p&&(b&&b.y+b.height==h?b.height++:a[u].push({x:d.x,y:d.y,height:1})),f)s?s.width++:s={x:d.x,y:d.y,width:1};else if(s){var m=s.x*this.object.layer.tileWidth*this.object.scaleX+r.x,v=s.y*this.object.layer.tileHeight*this.object.scaleY+r.y,P=new Phaser.Geom.Line(m,v,m+this.object.layer.tileWidth*this.object.scaleX*s.width,v);i.push(P),o.push(P),e.push(new Phaser.Geom.Point(m,v)),e.push(new Phaser.Geom.Point(m+this.object.layer.tileWidth*this.object.scaleX*s.width,v)),s=!1}}if(s){var x=s.x*this.object.layer.tileWidth*this.object.scaleX+r.x,j=s.y*this.object.layer.tileHeight*this.object.scaleY+r.y,w=new Phaser.Geom.Line(x,j,x+this.object.layer.tileWidth*this.object.scaleX*s.width,j);i.push(w),o.push(w),e.push(new Phaser.Geom.Point(x,j)),e.push(new Phaser.Geom.Point(x+this.object.layer.tileWidth*this.object.scaleX*s.width,j)),s=!1}}var G,M=n(this.object.layer.data[this.object.layer.data.length-1]);try{for(M.s();!(G=M.n()).done;){var A=G.value;if(this.collisionTiles.includes(A.index))s?s.width++:s={x:A.x,y:A.y+1,width:1};else if(s){var _=s.x*this.object.layer.tileWidth*this.object.scaleX+r.x,S=s.y*this.object.layer.tileHeight*this.object.scaleY+r.y,B=new Phaser.Geom.Line(_,S,_+this.object.layer.tileWidth*this.object.scaleX*s.width,S);i.push(B),o.push(B),e.push(new Phaser.Geom.Point(_,S)),e.push(new Phaser.Geom.Point(_+this.object.layer.tileWidth*this.object.scaleX*s.width,S)),s=!1}}}catch(t){M.e(t)}finally{M.f()}if(s){var L=s.x*this.object.layer.tileWidth*this.object.scaleX+r.x,C=s.y*this.object.layer.tileHeight*this.object.scaleY+r.y,R=new Phaser.Geom.Line(L,C,L+this.object.layer.tileWidth*this.object.scaleX*s.width,C);i.push(R),o.push(R),e.push(new Phaser.Geom.Point(L,C)),e.push(new Phaser.Geom.Point(L+this.object.layer.tileWidth*this.object.scaleX*s.width,C)),s=!1}var T,O=!1,I=[],D=n(this.object.layer.data);try{for(D.s();!(T=D.n()).done;){var X=T.value,E=X[X.length-1];this.collisionTiles.includes(E.index)?O?O.height++:O={x:E.x+1,y:E.y,height:1}:O&&(I.push(O),O=!1)}}catch(t){D.e(t)}finally{D.f()}a.push(I);for(var k=0,W=a;k<W.length;k++){var Y=W[k];if(Y){var N,U=n(Y);try{var q=function(){var s=N.value,a=s.x*t.object.layer.tileWidth*t.object.scaleX+r.x,h=s.y*t.object.layer.tileHeight*t.object.scaleY+r.y,c=h+t.object.layer.tileHeight*t.object.scaleY*s.height,l=new Phaser.Geom.Line(a,h,a,c);i.push(l),e.filter((function(t){return t.x==a&&t.y==h}))||e.push(new Phaser.Geom.Point(a,y)),e.filter((function(t){return t.x==a&&t.y==c}))||e.push(new Phaser.Geom.Point(a,y));var u,g=n(o);try{for(g.s();!(u=g.n()).done;){var d=u.value;if(l.x1!=d.x1&&l.x1!=d.x2&&l.x2!=d.x1&&l.x2!=d.x2&&(l.y1!=d.y1&&l.y1!=d.y2&&l.y2!=d.y1&&l.y2!=d.y2)){var f=new Phaser.Geom.Point;Phaser.Geom.Intersects.LineToLine(l,d,f)&&e.push(f)}}}catch(t){g.e(t)}finally{g.f()}};for(U.s();!(N=U.n()).done;)q()}catch(t){U.e(t)}finally{U.f()}}}return this._points=e,this._segments=i,this}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.collisionTiles=t,this}i.r(e),i.d(e,{getPoints:function(){return s},getSegments:function(){return o},setCollisionTiles:function(){return h},updateMap:function(){return a}})},98:function(t,e,i){"use strict";function n(t){return this.segmentCount=t,this.circle=!t,this.updateMap(),this}i.r(e),i.d(e,{setSegmentCount:function(){return n}})},519:function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.angle=Phaser.Math.Angle.Normalize(t),Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.angle=Phaser.Math.Angle.Normalize(Phaser.Math.DegToRad(t)),Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this}i.d(e,{e:function(){return n},m:function(){return r}})},157:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(){var t,e,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this.rayRange,o=!!r.internal&&r.internal,a=performance.now(),h={method:"cast",rays:1,testedMappedObjects:0,hitMappedObjects:0,segments:0,time:0};if(this._raycaster&&this._raycaster.boundingBox){var c=[];if(Phaser.Geom.Intersects.GetLineToRectangle(this._ray,this._raycaster.boundingBox.rectangle,c),1===c.length)t=c[0];else if(c.length>1){var l,u=n(c);try{for(u.s();!(l=u.n()).done;){var y=l.value,g=Phaser.Math.Distance.Between(this.origin.x,this.origin.y,y.x,y.y);g<s&&(s=g,t=y)}}catch(t){u.e(t)}finally{u.f()}}else if(r.target){var d=Phaser.Math.Distance.Between(this.origin.x,this.origin.y,r.target.x,r.target.y);this.rayRange>d&&(s=d,t=r.target)}}if(!r.objects){if(!this._raycaster)return intersections;r.objects=this._raycaster.mappedObjects}var f,p,b=n(r.objects);try{for(b.s();!(f=b.n()).done;){var m=f.value,v=void 0,P=void 0;if(v="body"===m.type||"composite"===m.type?m.raycasterMap:m.data.get("raycasterMap"),h.testedMappedObjects++,o?P=v._boundingBox:(P=v.getBoundingBox()).setTo(P.x-.1,P.y-.1,P.width+.2,P.height+.2),0!==Phaser.Geom.Intersects.GetLineToRectangle(this._ray,P).length){h.hitMappedObjects++,h.segments+=v.getSegments(this).length;var x,j=n(v.getSegments(this));try{for(j.s();!(x=j.n()).done;){var w=x.value,G=[];if(r.target){if(Phaser.Geom.Point.Equals(r.target,w.getPointA())||Phaser.Geom.Point.Equals(r.target,w.getPointB()))G=r.target;else if(!Phaser.Geom.Intersects.LineToLine(this._ray,w,G))continue}else if(!Phaser.Geom.Intersects.LineToLine(this._ray,w,G))continue;var M=Phaser.Math.Distance.Between(this.origin.x,this.origin.y,G.x,G.y);M<s&&(s=M,t=G,i=v.object,e=w)}}catch(t){j.e(t)}finally{j.f()}if(v.circle){if(v._points.length>0)continue;if(r.target){var A,_=v.getPoints(this),S=!1,B=n(_);try{for(B.s();!(A=B.n()).done;){var L=A.value;if(Phaser.Geom.Point.Equals(r.target,L)){var C=Phaser.Math.Distance.Between(this.origin.x,this.origin.y,L.x,L.y);if(C<s){s=C,t=L,i=v.object,S=!0;break}}}}catch(t){B.e(t)}finally{B.f()}if(S)continue}var R=[],T=new Phaser.Geom.Point;T.x=v.object.x-v.object.displayWidth*(v.object.originX-.5),T.y=v.object.y-v.object.displayHeight*(v.object.originY-.5);var O=v.object.rotation;if(0!==O){var I=new Phaser.Geom.Line(v.object.x,v.object.y,T.x,T.y);Phaser.Geom.Line.SetToAngle(I,v.object.x,v.object.y,Phaser.Geom.Line.Angle(I)+O,Phaser.Geom.Line.Length(I));var D=I.getPointB();T.x=D.x,T.y=D.y}var X=new Phaser.Geom.Circle(T.x,T.y,v.object.radius*v.object.scaleX);if(Phaser.Geom.Intersects.GetLineToCircle(this._ray,X,R)){var E,k=n(R);try{for(k.s();!(E=k.n()).done;){var W=E.value,Y=Phaser.Math.Distance.Between(this._ray.x1,this._ray.y1,W.x,W.y);Y<s&&(s=Y,t=W,i=v.object)}}catch(t){k.e(t)}finally{k.f()}}}if("Container"==v.type&&v._circles.length>0){var N,U=n(v._circles);try{for(U.s();!(N=U.n()).done;){var q=N.value;if(r.target){var H,F=!1,z=n(q.points);try{for(z.s();!(H=z.n()).done;){var $=H.value;if(Phaser.Geom.Point.Equals(r.target,$)){var K=Phaser.Math.Distance.Between(this.origin.x,this.origin.y,$.x,$.y);if(K<s){s=K,t=$,i=v.object,F=!0;break}}}}catch(t){z.e(t)}finally{z.f()}if(F)continue}var V=[];if(Phaser.Geom.Intersects.GetLineToCircle(this._ray,q,V)){var J,Q=n(V);try{for(Q.s();!(J=Q.n()).done;){var Z=J.value,tt=Phaser.Math.Distance.Between(this._ray.x1,this._ray.y1,Z.x,Z.y);tt<s&&(s=tt,t=Z,i=v.object)}}catch(t){Q.e(t)}finally{Q.f()}}}}catch(t){U.e(t)}finally{U.f()}}}}}catch(t){b.e(t)}finally{b.f()}if(o?(this._stats.rays++,this._stats.testedMappedObjects+=h.testedMappedObjects,this._stats.hitMappedObjects+=h.hitMappedObjects,this._stats.segments+=h.segments):(h.time=performance.now()-a,this._stats=h),t)(p=new Phaser.Geom.Point(t.x,t.y)).segment=e,p.object=i;else{if(this.ignoreNotIntersectedRays)return!1;p=this._ray.getPointB()}return this.round&&(p.x=Math.round(p.x),p.y=Math.round(p.y)),o||this.drawDebug([p]),p}i.d(e,{p:function(){return s}})},330:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.angle,i=[],r=[],s=[],o=[],a=performance.now();if(this._stats={method:"castCircle",rays:0,testedMappedObjects:0,hitMappedObjects:0,segments:0,time:0},!t.objects){if(!this._raycaster)return i;t.objects=this._raycaster.mappedObjects}if(this._raycaster&&this._raycaster.boundingBox){var h,c=n(this._raycaster.boundingBox.points);try{for(c.s();!(h=c.n()).done;){var l=h.value;s.push({point:l,angle:Phaser.Math.Angle.Between(this.origin.x,this.origin.y,l.x,l.y)})}}catch(t){c.e(t)}finally{c.f()}}for(var u=0,y=t.objects.length;u<y;u++){var g=t.objects[u];if(this.boundsInRange(g)){o.push(g);var d=void 0,f=void 0;(f=(d="body"===g.type||"composite"===g.type?g.raycasterMap:g.data.get("raycasterMap")).getBoundingBox()).setTo(f.x-.1,f.y-.1,f.width+.2,f.height+.2),d._boundingBox=f,r.push(d);var p,b=n(d.getPoints(this));try{for(b.s();!(p=b.n()).done;){var m=p.value;s.push({point:m,angle:Phaser.Math.Angle.Between(this.origin.x,this.origin.y,m.x,m.y)})}}catch(t){b.e(t)}finally{b.f()}for(var v=u+1,P=t.objects.length;v<P;v++){var x=t.objects[v],j=void 0;if(j="body"===x.type||"composite"===x.type?x.raycasterMap:x.data.get("raycasterMap"),Phaser.Geom.Intersects.RectangleToRectangle(d.getBoundingBox(),j.getBoundingBox())){var w,G=n(d.getSegments(this));try{for(G.s();!(w=G.n()).done;){var M,A=w.value,_=n(j.getSegments(this));try{for(_.s();!(M=_.n()).done;){var S=M.value,B=[];Phaser.Geom.Intersects.LineToLine(A,S,B)&&s.push({point:new Phaser.Geom.Point(B.x,B.y),angle:Phaser.Math.Angle.Between(this.origin.x,this.origin.y,B.x,B.y)})}}catch(t){_.e(t)}finally{_.f()}}}catch(t){G.e(t)}finally{G.f()}}}}}s.sort(function(t,e){return t.angle==e.angle?Phaser.Math.Distance.Between(this.origin.x,this.origin.y,t.point.x,t.point.y)>Phaser.Math.Distance.Between(this.origin.x,this.origin.y,e.point.x,e.point.y)?1:-1:t.angle-e.angle}.bind(this));for(var L={angle:!1},C=0,R=s;C<R.length;C++){var T=R[C];if(T.angle!==L.angle){L=T,this.setAngle(T.angle);var O=this.cast({objects:o,target:T.point,internal:!0});if(O){var I=!1;if(this.round){var D=new Phaser.Geom.Point(Math.round(T.point.x),Math.round(T.point.y));I=Phaser.Geom.Point.Equals(D,O)}else I=Phaser.Geom.Point.Equals(T.point,O);if(I){this.setAngle(T.angle-1e-4);var X=this.cast({objects:o,internal:!0});X&&i.push(X),i.push(O),this.setAngle(T.angle+1e-4);var E=this.cast({objects:o,internal:!0});E&&i.push(E);continue}i.push(O)}}}return this.setAngle(e),this.intersections=i,this.autoSlice&&(this.slicedIntersections=this.slice()),this._stats.time=performance.now()-a,this.drawDebug(i),i}i.d(e,{q:function(){return s}})},352:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.angle,i=[],r=[],s=[],o=[],a=this.cone,h=0,c=0,l=performance.now();if(this._stats={method:"castCone",rays:0,testedMappedObjects:0,hitMappedObjects:0,segments:0,time:0},void 0!==t.cone&&(a=t.cone),void 0!==t.coneDeg&&(a=Phaser.Math.DegToRad(t.coneDeg)),h=this.angle-a/2,c=this.angle+a/2,this.setAngle(h),s.push({point:this._ray.getPointB(),angle:h,angleOffsetDeg:Phaser.Math.RadToDeg(-a/2)}),this.setAngle(c),s.push({point:this._ray.getPointB(),angle:c,angleOffsetDeg:Phaser.Math.RadToDeg(a/2)}),!t.objects){if(!this._raycaster)return i;t.objects=this._raycaster.mappedObjects}if(this._raycaster&&this._raycaster.boundingBox){var u,y=n(this._raycaster.boundingBox.points);try{for(y.s();!(u=y.n()).done;){var g=u.value,d=Phaser.Math.Angle.Between(this.origin.x,this.origin.y,g.x,g.y),f=Phaser.Math.Angle.ShortestBetween(Phaser.Math.RadToDeg(d),Phaser.Math.RadToDeg(e));Math.abs(f)<Phaser.Math.RadToDeg(a/2)&&s.push({point:g,angle:d,angleOffsetDeg:-f})}}catch(t){y.e(t)}finally{y.f()}}for(var p=0,b=t.objects.length;p<b;p++){var m=t.objects[p];if(this.boundsInRange(m)){o.push(m);var v=void 0,P=void 0;(P=(v="body"===m.type||"composite"===m.type?m.raycasterMap:m.data.get("raycasterMap")).getBoundingBox()).setTo(P.x-.1,P.y-.1,P.width+.2,P.height+.2),v._boundingBox=P,r.push(v);var x,j=n(v.getPoints(this));try{for(j.s();!(x=j.n()).done;){var w=x.value,G=Phaser.Math.Angle.Between(this.origin.x,this.origin.y,w.x,w.y),M=Phaser.Math.Angle.ShortestBetween(Phaser.Math.RadToDeg(G),Phaser.Math.RadToDeg(e));Math.abs(M)<Phaser.Math.RadToDeg(a/2)&&s.push({point:w,angle:Phaser.Math.Angle.Between(this.origin.x,this.origin.y,w.x,w.y),angleOffsetDeg:-M})}}catch(t){j.e(t)}finally{j.f()}for(var A=p+1,_=t.objects.length;A<_;A++){var S=t.objects[A],B=void 0;if(B="body"===S.type||"composite"===S.type?S.raycasterMap:S.data.get("raycasterMap"),Phaser.Geom.Intersects.RectangleToRectangle(v.getBoundingBox(),B.getBoundingBox())){var L,C=n(v.getSegments(this));try{for(C.s();!(L=C.n()).done;){var R,T=L.value,O=n(B.getSegments(this));try{for(O.s();!(R=O.n()).done;){var I=R.value,D=[];if(Phaser.Geom.Intersects.LineToLine(T,I,D)){var X=Phaser.Math.Angle.Between(this.origin.x,this.origin.y,D.x,D.y),E=Phaser.Math.Angle.ShortestBetween(Phaser.Math.RadToDeg(X),Phaser.Math.RadToDeg(e));Math.abs(E)<Phaser.Math.RadToDeg(a/2)&&s.push({point:new Phaser.Geom.Point(D.x,D.y),angle:Phaser.Math.Angle.Between(this.origin.x,this.origin.y,D.x,D.y),angleOffsetDeg:-E})}}}catch(t){O.e(t)}finally{O.f()}}}catch(t){C.e(t)}finally{C.f()}}}}}s.sort(function(t,e){return t.angle==e.angle?Phaser.Math.Distance.Between(this.origin.x,this.origin.y,t.point.x,t.point.y)>Phaser.Math.Distance.Between(this.origin.x,this.origin.y,e.point.x,e.point.y)?1:-1:t.angleOffsetDeg-e.angleOffsetDeg}.bind(this));for(var k={angle:!1},W=0,Y=s;W<Y.length;W++){var N=Y[W];if(N.angle!==k.angle){k=N,this.setAngle(N.angle);var U=this.cast({objects:o,target:N.point,internal:!0});if(U){var q=!1;if(this.round){var H=new Phaser.Geom.Point(Math.round(N.point.x),Math.round(N.point.y));q=Phaser.Geom.Point.Equals(H,U)}else q=Phaser.Geom.Point.Equals(N.point,U);if(q){this.setAngle(N.angle-1e-4);var F=this.cast({objects:o,internal:!0});F&&i.push(F),i.push(U),this.setAngle(N.angle+1e-4);var z=this.cast({objects:o,internal:!0});z&&i.push(z);continue}i.push(U)}}}return this.setAngle(e),this.intersections=i,this.autoSlice&&(this.slicedIntersections=this.slice(i,!1)),this._stats.time=performance.now()-l,this.drawDebug(i),i}i.d(e,{G:function(){return s}})},67:function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.cone=t,this}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.cone=Phaser.Math.DegToRad(t),this}i.d(e,{x:function(){return r},z:function(){return n}})},376:function(t,e,i){"use strict";function n(t){return this.object=t.object,void 0!==t.origin&&this.origin.setTo(t.origin.x,t.origin.y),void 0!==t.angle&&(this.angle=Phaser.Math.Angle.Normalize(t.angle)),void 0!==t.angleDeg&&(this.angle=Phaser.Math.Angle.Normalize(Phaser.Math.DegToRad(t.angleDeg))),void 0!==t.cone&&(this.cone=t.cone),void 0!==t.coneDeg&&(this.cone=Phaser.Math.DegToRad(t.coneDeg)),void 0!==t.rayRange&&(this.rayRange=t.rayRange),void 0!==t.collisionRange&&(this.collisionRange=t.collisionRange),void 0!==t.detectionRange&&(this.detectionRange=t.detectionRange),void 0!==t.ignoreNotIntersectedRays&&(this.ignoreNotIntersectedRays=1==t.ignoreNotIntersectedRays),void 0!==t.round&&(this.round=1==t.round),void 0!==t.autoSlice&&(this.autoSlice=1==t.autoSlice),void 0!==t.enablePhysics&&t.enablePhysics&&this.enablePhysics(t.enablePhysics),Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this.detectionRangeCircle.setTo(this.origin.x,this.origin.y,this.detectionRange),this._raycaster.debugOptions.enabled&&void 0!==this._raycaster.scene&&(this.graphics=this._raycaster.scene.add.graphics({lineStyle:{width:1,color:65280},fillStyle:{color:16711935}}),this.graphics.setDepth(1e3)),this}i.d(e,{v:function(){return n}})},737:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t){if(void 0===this.graphics||!this._raycaster.debugOptions.enabled)return this;if(this.graphics.clear(),!this._raycaster.debugOptions.rays)return this;if(this._raycaster.debugOptions.graphics.ray){this.graphics.lineStyle(1,this._raycaster.debugOptions.graphics.ray);var e,i=n(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;this.graphics.strokeLineShape({x1:this.origin.x,y1:this.origin.y,x2:r.x,y2:r.y})}}catch(t){i.e(t)}finally{i.f()}}if(this._raycaster.debugOptions.graphics.rayPoint){this.graphics.fillStyle(this._raycaster.debugOptions.graphics.rayPoint),this.graphics.fillPoint(this.origin.x,this.origin.y,3);var s,o=n(t);try{for(o.s();!(s=o.n()).done;){var a=s.value;this.graphics.fillPoint(a.x,a.y,3)}}catch(t){o.e(t)}finally{o.f()}}return this}i.d(e,{K:function(){return s}})},645:function(t,e,i){"use strict";function n(){for(var t in this)delete this[t]}i.d(e,{o:function(){return n}})},847:function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"arcade";if(void 0!==this.body)return this;if(this.collisionCircle=this._raycaster.scene.add.circle(this.origin.x,this.origin.y,this.collisionRange),this.collisionCircle._ray=this,"matter"===t){if(this.bodyType="matter",this.collisionRange==Phaser.Math.MAX_SAFE_INTEGER){var e=this._raycaster.boundingBox;this._raycaster.scene.matter.add.gameObject(this.collisionCircle,{shape:{type:"rectangle",x:e.rectangle.centerX,y:e.rectangle.centerY,width:e.rectangle.width,height:e.rectangle.height},label:"phaser-raycaster-ray-body",isSensor:!0,ignoreGravity:!0})}else this._raycaster.scene.matter.add.gameObject(this.collisionCircle,{shape:{type:"circle"},label:"phaser-raycaster-ray-body",isSensor:!0,ignoreGravity:!0});this.body=this.collisionCircle.body,this.body._ray=this,this.setOnCollideActive()}else this.bodyType="arcade",this._raycaster.scene.physics.add.existing(this.collisionCircle),this.body=this.collisionCircle.body,this.body.setCircle(this.collisionRange).setAllowGravity(!1).setImmovable(!0),this.body._ray=this;return this}i.d(e,{W:function(){return n}})},729:function(t,e,i){"use strict";function n(t){return this.body.collisionFilter.category=t,this}function r(t){return this.body.collisionFilter.group=t,this}function s(t){var e=0;if(Array.isArray(t))for(var i=0;i<t.length;i++)e|=t[i];else e=t;return this.body.collisionFilter.mask=e,this}function o(t){var e=this;return this.body.onCollideCallback=function(i){i.rayCollided?t(i):e.processOverlap(i)&&(i.rayCollided=!0,t(i))},this}function a(t){return this.body.onCollideEndCallback=function(e){e.rayCollided&&(e.rayCollided=!1,t(e))},this}function h(t){var e=this;return this.body.onCollideActiveCallback=function(i){if(e.processOverlap(i)){var n="phaser-raycaster-ray-body"===i.bodyA.label?i.bodyB:i.bodyA;!0!==i.rayCollided&&(i.rayCollided=!0,e.body.onCollideCallback&&e.body.onCollideCallback(i),void 0!==e.body.onCollideWith&&e.body.onCollideWith[n.id]&&e.body.onCollideWith[n.id](n,i)),t&&t(i)}else e.body.onCollideEndCallback&&!0===i.rayCollided&&e.body.onCollideEndCallback(i)},this}function c(t,e){var i=this,n=function(t,n){n.rayCollided?e(t,n):i.processOverlap(n)&&(n.rayCollided=!0,e(t,n))};Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var s=t[r].hasOwnProperty("body")?t[r].body:t[r];this.body.setOnCollideWith(s,n)}return this}i.d(e,{B5:function(){return r},Jt:function(){return o},f3:function(){return s},iN:function(){return a},kK:function(){return h},wy:function(){return c},y4:function(){return n}})},262:function(t,e,i){"use strict";function n(t,e){return this.origin.setTo(t,e),Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this.detectionRangeCircle.setTo(this.origin.x,this.origin.y,this.detectionRange),("matter"===this.bodyType&&this.collisionRange!==Phaser.Math.MAX_SAFE_INTEGER||"arcade"===this.bodyType)&&(this.collisionCircle.x=t,this.collisionCircle.y=e),this}i.d(e,{j:function(){return n}})},72:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t){var e=[],i=new Phaser.Geom.Circle(this.origin.x,this.origin.y,this.collisionRange);if("matter"===this.bodyType){if(void 0===t){var r,s=n(t=this._raycaster.scene.matter.query.collides(this.body,this._raycaster.scene.matter.getMatterBodies()));try{for(s.s();!(r=s.n()).done;){var o=r.value,a=o.bodyA===this.body?o.bodyB:o.bodyA;this.testMatterOverlap(a)&&e.push(a)}}catch(t){s.e(t)}finally{s.f()}}else{Array.isArray(t)||(t=[t]);var h,c=n(t);try{for(c.s();!(h=c.n()).done;){var l=h.value;l!==this.body&&(this.testMatterOverlap(l)&&e.push(l))}}catch(t){c.e(t)}finally{c.f()}}}else{var u=!1;if(void 0===t?(t=this._raycaster.scene.physics.overlapCirc(this.origin.x,this.origin.y,this.collisionRange,!0,!0),u=!0):Array.isArray(t)||(t=[t]),u){var y,g=n(t);try{for(g.s();!(y=g.n()).done;){var d=y.value;if(d!==this.body){var f=void 0;f=d.isCircle?new Phaser.Geom.Circle(d.position.x+d.halfWidth,d.position.y+d.halfWidth,d.halfWidth):new Phaser.Geom.Rectangle(d.x,d.y,d.width,d.height),this.testArcadeOverlap(f)&&e.push(d.gameObject)}}}catch(t){g.e(t)}finally{g.f()}}else{var p,b=n(t);try{for(b.s();!(p=b.n()).done;){var m=p.value;if(void 0!==m.body){var v=void 0;if(m.body.isCircle){if(v=new Phaser.Geom.Circle(m.body.position.x+m.body.halfWidth,m.body.position.y+m.body.halfWidth,m.body.halfWidth),!Phaser.Geom.Intersects.CircleToCircle(i,v))continue}else if(v=new Phaser.Geom.Rectangle(m.body.x,m.body.y,m.body.width,m.body.height),!Phaser.Geom.Intersects.CircleToRectangle(i,v))continue;this.testArcadeOverlap(v)&&e.push(m)}}}catch(t){b.e(t)}finally{b.f()}}}return e}function o(t,e){var i,n,r;if(void 0!==t.bodyA&&void 0!==t.bodyB?(i=t.bodyA,n=t.bodyB):(i=t,n=e),void 0!==i._ray&&i._ray===this)r=n;else{if(void 0===n._ray||n._ray!==this)return!1;r=i}return this.overlap(r).length>0}function a(t){var e,i=n(this.slicedIntersections);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(0==t.type?Phaser.Geom.Intersects.TriangleToCircle(r,t):Phaser.Geom.Intersects.RectangleToTriangle(t,r))return!0}}catch(t){i.e(t)}finally{i.f()}return!1}function h(t){var e;if("body"===t.type)e=t;else{if(void 0===t.body)return!1;e=t.body}var i,r=n(e.parts.length>1?e.parts.splice(1):e.parts);try{for(r.s();!(i=r.n()).done;){for(var s=i.value,o=s.vertices[0],a=1,h=s.vertices.length;a<h;a++){var c,l=s.vertices[a],u=new Phaser.Geom.Line(o.x,o.y,l.x,l.y),y=n(this.slicedIntersections);try{for(y.s();!(c=y.n()).done;){var g=c.value,d=Phaser.Geom.Intersects.TriangleToLine(g,u);if(d||(d=Phaser.Geom.Triangle.ContainsPoint(g,u.getPointA())),d||(d=Phaser.Geom.Triangle.ContainsPoint(g,u.getPointB())),d)return!0}}catch(t){y.e(t)}finally{y.f()}o=l}var f,p=new Phaser.Geom.Line(s.vertices[s.vertices.length-1].x,s.vertices[s.vertices.length-1].y,s.vertices[0].x,s.vertices[0].y),b=n(this.slicedIntersections);try{for(b.s();!(f=b.n()).done;){var m=f.value;if(Phaser.Geom.Intersects.TriangleToLine(m,p))return!0}}catch(t){b.e(t)}finally{b.f()}}}catch(t){r.e(t)}finally{r.f()}return!1}i.d(e,{at:function(){return s},h2:function(){return a},jD:function(){return o},z_:function(){return h}})},533:function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Phaser.Math.MAX_SAFE_INTEGER;return this.rayRange=t,Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.detectionRange=t,this.detectionRangeCircle.setTo(this.origin.x,this.origin.y,this.detectionRange),this}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Phaser.Math.MAX_SAFE_INTEGER,e=this.collisionRange==Phaser.Math.MAX_SAFE_INTEGER;if(this.collisionRange=t,this.collisionCircle.setRadius(this.collisionRange),"matter"===this.bodyType){if(this.collisionRange==Phaser.Math.MAX_SAFE_INTEGER){var i=this._raycaster.boundingBox;this._raycaster.scene.matter.body.set(this.body,{shape:{type:"rectangle",x:i.rectangle.centerX,y:i.rectangle.centerY,width:i.rectangle.width,height:i.rectangle.height,circleRadius:0}})}else e?this._raycaster.scene.matter.body.set(this.body,{shape:{type:"circle",x:this.collisionCircle.x,y:this.collisionCircle.y},circleRadius:this.collisionRange,isStatic:!1}):this.collisionCircle.setRadius(this.collisionRange);this._raycaster.scene.matter.body.set(this.body,"circleRadius",this.collisionRange)}else"arcade"===this.bodyType&&this.body.setCircle(this.collisionRange);return this}function o(t){var e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.detectionRange||(e=i||("body"===t.type||"composite"===t.type?t.raycasterMap.getBoundingBox():t.data.get("raycasterMap").getBoundingBox()),!!Phaser.Geom.Intersects.CircleToRectangle(this.detectionRangeCircle,e))}i.d(e,{HL:function(){return n},lG:function(){return s},qw:function(){return r},sp:function(){return o}})},426:function(t,e,i){"use strict";function n(t,e){this._raycaster=e||!1,this.origin=new Phaser.Geom.Point,this._ray=new Phaser.Geom.Line,this.angle=0,this.cone=0,this.rayRange=Phaser.Math.MAX_SAFE_INTEGER,this.detectionRange=0,this.detectionRangeCircle=new Phaser.Geom.Circle,this.collisionRange=Phaser.Math.MAX_SAFE_INTEGER,this.ignoreNotIntersectedRays=!0,this.round=!1,this.autoSlice=!1,this.intersections=[],this.slicedIntersections=[],this.bodyType=!1,this._stats={method:"cast",rays:0,testedMappedObjects:0,hitMappedObjects:0,segments:0,time:0},this.graphics,this.config(t)}i.d(e,{z:function(){return n}}),n.prototype={config:i(376).v,getStats:i(414).f,setRay:i(394).R,setOrigin:i(262).j,setRayRange:i(533).HL,setAngle:i(519).e,setAngleDeg:i(519).m,setCone:i(67).z,setConeDeg:i(67).x,setDetectionRange:i(533).qw,boundsInRange:i(533).sp,cast:i(157).p,castCircle:i(330).q,castCone:i(352).G,slice:i(663).t,setCollisionRange:i(533).lG,enablePhysics:i(847).W,overlap:i(72).at,processOverlap:i(72).jD,testArcadeOverlap:i(72).h2,testMatterOverlap:i(72).z_,setCollisionCategory:i(729).y4,setCollisionGroup:i(729).B5,setCollidesWith:i(729).f3,setOnCollide:i(729).Jt,setOnCollideEnd:i(729).iN,setOnCollideActive:i(729).kK,setOnCollideWith:i(729).wy,drawDebug:i(737).K,destroy:i(645).o}},394:function(t,e,i){"use strict";function n(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Phaser.Math.MAX_SAFE_INTEGER;return this.origin.setTo(t,e),this.angle=Phaser.Math.Angle.Normalize(i),this.rayRange=n,Phaser.Geom.Line.SetToAngle(this._ray,this.origin.x,this.origin.y,this.angle,this.rayRange),this.detectionRangeCircle.setTo(this.origin.x,this.origin.y,this.detectionRange),this}i.d(e,{R:function(){return n}})},663:function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.intersections,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(t)){if(4!==t.type)return[];t=t.points}if(0===t.length)return[];for(var i=[],n=0,r=t.length-1;n<r;n++)i.push(new Phaser.Geom.Triangle(this.origin.x,this.origin.y,t[n].x,t[n].y,t[n+1].x,t[n+1].y));return e&&i.push(new Phaser.Geom.Triangle(this.origin.x,this.origin.y,t[0].x,t[0].y,t[t.length-1].x,t[t.length-1].y)),i}i.d(e,{t:function(){return n}})},414:function(t,e,i){"use strict";function n(){return this._stats}i.d(e,{f:function(){return n}})},741:function(t,e,i){"use strict";function n(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)
/**
* @author       Marcin Walczak <contact@marcin-walczak.pl>
* @copyright    2021 Marcin Walczak
* @license      {@link https://github.com/wiserim/phaser-raycaster/blob/master/LICENSE|MIT License}
*/}function o(t){if(this.version="0.10.4",this.scene,this.graphics,this.debugOptions={enabled:!1,maps:!0,rays:!0,graphics:{ray:65280,rayPoint:16711935,mapPoint:65535,mapSegment:255,mapBoundingBox:16711680}},this._stats={mappedObjects:{total:0,static:0,dynamic:0,rectangleMaps:0,polygonMaps:0,circleMaps:0,lineMaps:0,containerMaps:0,tilemapMaps:0,matterMaps:0}},this.boundingBox=!1,this.mappedObjects=[],this.sortedPoints=[],this.mapSegmentCount=0,void 0!==t){if(void 0===t.boundingBox&&void 0!==t.scene)if(void 0!==t.scene.physics)t.boundingBox=t.scene.physics.world.bounds;else if(void 0!==t.scene.matter){var e=t.scene.matter.world.walls;null!==e.top&&(t.boundingBox=new Phaser.Geom.Rectangle(e.top.vertices[3].x,e.top.vertices[3].y,e.bottom.vertices[1].x-e.top.vertices[3].x,e.bottom.vertices[1].y-e.top.vertices[3].y))}this.setOptions(t),(void 0===t.autoUpdate||t.autoUpdate)&&this.scene.events.on("update",this.update.bind(this))}else this.scene.events.on("update",this.update.bind(this));return this}i.d(e,{i:function(){return o}}),o.prototype={setOptions:function(t){return void 0!==t.scene&&(this.scene=t.scene,this.graphics=this.scene.add.graphics({lineStyle:{width:1,color:65280},fillStyle:{color:16711935}}),this.graphics.setDepth(999)),void 0!==t.debug&&!1!==t.debug&&(this.debugOptions.enabled=!0,"object"===s(t.debug)&&Object.assign(this.debugOptions,t.debug)),void 0!==t.mapSegmentCount&&(this.mapSegmentCount=t.mapSegmentCount),void 0!==t.objects&&this.mapGameObjects(t.objects),void 0!==t.boundingBox&&this.setBoundingBox(t.boundingBox.x,t.boundingBox.y,t.boundingBox.width,t.boundingBox.height),this},setBoundingBox:function(t,e,i,n){this.boundingBox={rectangle:new Phaser.Geom.Rectangle(t,e,i,n),points:[],segments:[]};var r=[new Phaser.Geom.Point(this.boundingBox.rectangle.left,this.boundingBox.rectangle.top),new Phaser.Geom.Point(this.boundingBox.rectangle.right,this.boundingBox.rectangle.top),new Phaser.Geom.Point(this.boundingBox.rectangle.right,this.boundingBox.rectangle.bottom),new Phaser.Geom.Point(this.boundingBox.rectangle.left,this.boundingBox.rectangle.bottom)];this.boundingBox.points=r;for(var s=0,o=this.boundingBox.points.length;s<o;s++)s+1<o?this.boundingBox.segments.push(new Phaser.Geom.Line(r[s].x,r[s].y,r[s+1].x,r[s+1].y)):this.boundingBox.segments.push(new Phaser.Geom.Line(r[s].x,r[s].y,r[0].x,r[0].y))},mapGameObjects:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.dynamic=e,i.segmentCount=void 0!==i.segmentCount?i.segmentCount:this.segmentCount,Array.isArray(t)||(t=[t]);var r,s=n(t);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(!this.mappedObjects.includes(o)&&(!o.data||!o.data.get("raycasterMapNotSupported"))){var a={};for(var h in i)a[h]=i[h];a.object=o;var c=new this.Map(a,this);if(c.notSupported)c.destroy();else switch("body"===o.type||"composite"===o.type?o.raycasterMap=c:(o.data||o.setDataEnabled(),o.data.set("raycasterMap",c)),this.mappedObjects.push(o),o.dynamic?this._stats.mappedObjects.dynamic++:this._stats.mappedObjects.static++,o.type){case"Polygon":this._stats.mappedObjects.polygonMaps++;break;case"Arc":this._stats.mappedObjects.circleMaps++;break;case"Line":this._stats.mappedObjects.lineMaps++;break;case"Container":this._stats.mappedObjects.containerMaps++;break;case"StaticTilemapLayer":case"DynamicTilemapLayer":case"TilemapLayer":this._stats.mappedObjects.tilemapMaps++;break;case"MatterBody":this._stats.mappedObjects.matterMaps++;break;default:this._stats.mappedObjects.rectangleMaps++}}}}catch(t){s.e(t)}finally{s.f()}return this._stats.mappedObjects.total=this.mappedObjects.length,this},removeMappedObjects:function(t){Array.isArray(t)||(t=[t]);var e,i=n(t);try{for(i.s();!(e=i.n()).done;){var r=e.value,s=this.mappedObjects.indexOf(r);switch(s>=0&&this.mappedObjects.splice(s,1),"body"===r.type||"composite"===r.type?r.raycasterMap.destroy():r.data.get("raycasterMap").destroy(),r.dynamic?this._stats.mappedObjects.dynamic--:this._stats.mappedObjects.static--,r.type){case"Polygon":this._stats.mappedObjects.polygonMaps--;break;case"Arc":this._stats.mappedObjects.circleMaps--;break;case"Line":this._stats.mappedObjects.lineMaps--;break;case"Container":this._stats.mappedObjects.containerMaps--;break;case"StaticTilemapLayer":case"DynamicTilemapLayer":case"TilemapLayer":this._stats.mappedObjects.tilemapMaps--;break;case"MatterBody":this._stats.mappedObjects.matterMaps--;break;default:this._stats.mappedObjects.rectangleMaps--}}}catch(t){i.e(t)}finally{i.f()}return this._stats.mappedObjects.total=this.mappedObjects.length,this},enableMaps:function(t){Array.isArray(t)||(t=[t]);var e,i=n(t);try{for(i.s();!(e=i.n()).done;){var r=e.value,s=void 0;"body"===r.type||"composite"===r.type?s=r.raycasterMap:r.data&&(s=r.data.get("raycasterMap")),s&&(s.active=!0)}}catch(t){i.e(t)}finally{i.f()}return this},disableMaps:function(t){Array.isArray(t)||(t=[t]);var e,i=n(t);try{for(i.s();!(e=i.n()).done;){var r=e.value,s=void 0;"body"===r.type||"composite"===r.type?s=r.raycasterMap:r.data&&(s=r.data.get("raycasterMap")),s&&(s.active=!1)}}catch(t){i.e(t)}finally{i.f()}return this},update:function(){var t=0;if(this.mappedObjects.length>0){var e,i=n(this.mappedObjects);try{for(i.s();!(e=i.n()).done;){var r=e.value,s=void 0;"body"===r.type||"composite"===r.type?s=r.raycasterMap:r.data&&(s=r.data.get("raycasterMap")),s&&(s.dynamic&&(s.updateMap(),t++))}}catch(t){i.e(t)}finally{i.f()}this._stats.mappedObjects.static=this.mappedObjects.length-t,this._stats.mappedObjects.dynamic=t,this.debugOptions.enabled&&this.drawDebug()}return this},createRay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new this.Ray(t,this)},getStats:function(){return this._stats},drawDebug:function(){if(void 0===this.graphics||!this.debugOptions.enabled)return this;if(this.graphics.clear(),!this.debugOptions.maps)return this;var t,e=n(this.mappedObjects);try{for(e.s();!(t=e.n()).done;){var i=t.value,r=void 0;if(r="body"===i.type||"composite"===i.type?i.raycasterMap:i.data.get("raycasterMap")){if(this.debugOptions.graphics.mapBoundingBox&&(this.graphics.lineStyle(1,this.debugOptions.graphics.mapBoundingBox),this.graphics.strokeRectShape(r.getBoundingBox())),this.debugOptions.graphics.mapSegment){this.graphics.lineStyle(1,this.debugOptions.graphics.mapSegment);var s,o=n(r.getSegments());try{for(o.s();!(s=o.n()).done;){var a=s.value;this.graphics.strokeLineShape(a)}}catch(t){o.e(t)}finally{o.f()}}if(this.debugOptions.graphics.mapPoint){this.graphics.fillStyle(this.debugOptions.graphics.mapPoint);var h,c=n(r.getPoints());try{for(c.s();!(h=c.n()).done;){var l=h.value;this.graphics.fillPoint(l.x,l.y,3)}}catch(t){c.e(t)}finally{c.f()}}}}}catch(t){e.e(t)}finally{e.f()}return this},destroy:function(){for(var t in this.removeMappedObjects(this.mappedObjects),this)delete this[t]}},o.prototype.Map=i(667).D,o.prototype.Ray=i(426).z}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}return i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(880)}()}));
//# sourceMappingURL=phaser-raycaster.min.js.map